<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Valentine</title>

<style>
body{
  margin:0;
  height:100vh;
  background:url("background.jpg") no-repeat center center fixed;
  background-size:cover;
  display:flex;
  justify-content:center;
  align-items:center;
  font-family:'Poppins',sans-serif;
  overflow:hidden;
}

.wrapper{
  position:relative;
  width:420px;
  height:260px;
}

/* Envelope */
.flap{
  position:absolute;
  bottom:180px;
  width:100%;
  height:120px;
  background:#ff6f9f;
  clip-path:polygon(0 100%,100% 100%,50% 0);
  z-index:1;
}

.paper{
  position:absolute;
  width:85%;
  height:180px;
  left:7.5%;
  bottom:80px;
  background:white;
  border-radius:8px;
  box-shadow:0 10px 30px rgba(0,0,0,0.25);
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  transition:transform 0.6s ease;
  z-index:2;
  cursor:pointer;
}

.envelope-body{
  position:absolute;
  bottom:0;
  width:100%;
  height:180px;
  background:#ff8fb1;
  border-radius:10px;
  box-shadow:0 20px 50px rgba(0,0,0,0.3);
  z-index:3;
}

.wrapper.open .paper{
  transform:translateY(-100px);
}

.message{
  opacity:0;
  transition:opacity 0.4s ease 0.3s;
  text-align:center;
}

.wrapper.open .message{
  opacity:1;
}

.buttons{
  margin-top:20px;
  position:relative;
  height:50px;
}

button{
  padding:8px 22px;
  border-radius:30px;
  border:none;
  cursor:pointer;
  font-size:14px;
  transition:0.3s ease;
}

#yes{
  background:hotpink;
  color:white;
}

#yes:hover{
  transform:scale(1.1);
}

/* Floating NO button */
#no{
  position:absolute;
  padding:8px 22px;
  border-radius:30px;
  border:none;
  background:lightgray;
  cursor:pointer;
  font-size:14px;
  z-index:9999;
  display:none; /* hidden initially */
}

/* Popup */
.popup{
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  background:rgba(0,0,0,0.85);
  display:flex;
  justify-content:center;
  align-items:center;
  visibility:hidden;
  opacity:0;
  transition:0.4s ease;
  z-index:100000;
}

.popup.active{
  visibility:visible;
  opacity:1;
}

.popup-content{
  background:black;
  padding:20px;
  border-radius:20px;
  transform:scale(0.5);
  transition:0.4s ease;
  box-shadow:0 0 60px hotpink;
  text-align:center;
}

.popup.active .popup-content{
  transform:scale(1);
}

.popup img{
  max-height:500px;
  max-width:90vw;
  border-radius:15px;
}

.popup h2{
  color:white;
  margin-top:15px;
}
</style>
</head>

<body>

<div class="wrapper" id="wrapper">
  <div class="flap"></div>

  <div class="paper" id="paper">
    <div class="message">
      <h2>Will you be my Valentine? ðŸ’–</h2>
      <div class="buttons">
        <button id="yes">Yes</button>
      </div>
    </div>
  </div>

  <div class="envelope-body"></div>
</div>

<!-- Floating NO button outside envelope -->
<button id="no">No</button>

<div id="popup" class="popup">
  <div class="popup-content">
    <img src="love.jpg">
    <h2>Youâ€™re stuck with me now ðŸ’•</h2>
  </div>
</div>

<script>
const wrapper=document.getElementById("wrapper");
const paper=document.getElementById("paper");
const noBtn=document.getElementById("no");
const yesBtn=document.getElementById("yes");
const popup=document.getElementById("popup");

paper.addEventListener("click",()=>{
  wrapper.classList.add("open");

  const rect = yesBtn.getBoundingClientRect();
  noBtn.style.left = rect.right + 20 + "px";
  noBtn.style.top = rect.top + "px";
  noBtn.style.display = "block";
});

/* Progressive intelligent movement */

let speedMultiplier = 1;

document.addEventListener("mousemove",(e)=>{
  if(noBtn.style.display==="none") return;

  const rect=noBtn.getBoundingClientRect();
  const btnX = rect.left + rect.width/2;
  const btnY = rect.top + rect.height/2;

  const dist = Math.hypot(e.clientX - btnX, e.clientY - btnY);

  if(dist < 120){
    speedMultiplier += 0.12;

    const angle = Math.atan2(btnY - e.clientY, btnX - e.clientX);
    const moveDistance = 80 * speedMultiplier;

    let newLeft = rect.left + Math.cos(angle) * moveDistance;
    let newTop = rect.top + Math.sin(angle) * moveDistance;

    const minX = wrapper.offsetLeft;
    const maxX = wrapper.offsetLeft + wrapper.offsetWidth - rect.width;
    const minY = wrapper.offsetTop;
    const maxY = wrapper.offsetTop + wrapper.offsetHeight - rect.height;

    newLeft = Math.max(minX, Math.min(newLeft, maxX));
    newTop = Math.max(minY, Math.min(newTop, maxY));

    noBtn.style.left = newLeft + "px";
    noBtn.style.top = newTop + "px";
  }
});

/* Cute lines if clicked */

noBtn.addEventListener("click",()=>{
  const messages = [
    "Heyyy ðŸ˜¤",
    "Not allowed ðŸ˜­",
    "Nice try ðŸ’•",
    "You thought? ðŸ˜Œ",
    "Still no option ðŸ˜œ"
  ];

  noBtn.innerText = messages[Math.floor(Math.random()*messages.length)];
});

/* YES popup */

yesBtn.addEventListener("click",(e)=>{
  e.stopPropagation();
  popup.classList.add("active");
});

popup.addEventListener("click",()=>{
  popup.classList.remove("active");
});
</script>

</body>
</html>
